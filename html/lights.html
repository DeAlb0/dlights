
<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description" content="flashing ligths to acompany the music" />
  <meta charset="utf-8">
  <title>Lights & Colors</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="author" content="DeAlb0">
  <!-- link rel="stylesheet" href="css/style.css">
  <script src="http://code.jquery.com/jquery-latest.min.js"></script -->


<style>
    .light {
        border-radius : 50%;
        width : 3vw;
        height: 3vw;
        position: absolute;
        transition: 0.5s transform 0s;
    }
    .lights {
        position: static;
        display:block;
        width : 100%;
        height: 100%;
        overflow: hidden;
        background-color: black;
    }
    .light.lighton {
        /*****
        width : 20vw;
        height: 20vw;
        *********/
        transform: scale(5);
        transition: 0.1s transform 0s;
    }
    body {
        background-color: black;
    }

</style>
<script>

const lightUpdateTime = 200
const lrows = 3
const lcols = 6
const lcount = lrows * lcols
var cycle = 0
var metacycle = 0
var diva = []

function lightUpdate() {
    for ( i = 0 ; i < lcount ; i++) {
        d = diva[i]
        let x = i % lcols
        let y = Math.floor(i / lrows)
//        let on = Math.max(((cycle - i) % lcount),((cycle - (lcount - i)) % lcount)) < (metacycle % lcount)
        let on = ((cycle - i) % lcount) <= (metacycle % lcount) - 1  ^ ((cycle - (lcount - i - 1)) % lcount) <= (metacycle % lcount) - 1
        d.classList.toggle('lighton',on)
        d.style.backgroundColor = `hsl(${(i % 6) * 60}deg 90% 50%)`
    }
    cycle++
    if ( cycle % lcount == 0 )metacycle++
}

function lights() {
    for ( base of document.querySelectorAll('.lights')) {
        let lcols = base.getAttribute('columns') || 6
        let lrows = base.getAttribute('rows') || 3
        for ( i = 0 ; i < lcount ; i++ ) {
            ndiv = document.createElement('div')
            ndiv.classList.add('light')
            ndiv.classList.add('light'+i)
            base.appendChild(ndiv)
            diva.push(ndiv)
            ndiv.style.left = `${(i % lcols + 0.5)*100/lcols}%`
            ndiv.style.top = `${(Math.floor(i/lcols)+0.5)*100/lrows}%`
        }
    }
    setInterval(lightUpdate,lightUpdateTime)
}
document.addEventListener("DOMContentLoaded", lights)

</script>

</head>

<body>
  
<div class="lights" columns="6" xrows="3">
  
</div>

<script>
</script>

</body>
</html>